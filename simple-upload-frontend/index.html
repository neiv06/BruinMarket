<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simple Image Upload</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; padding: 24px; }
    .card { max-width: 560px; margin: 0 auto; padding: 20px; border: 1px solid #e5e7eb; border-radius: 8px; }
    h1 { font-size: 20px; margin: 0 0 12px; }
    input[type="file"] { margin: 12px 0; }
    button { padding: 8px 12px; border: none; border-radius: 6px; background: #2563eb; color: white; cursor: pointer; }
    button:disabled { background: #9ca3af; cursor: not-allowed; }
    .status { margin-top: 12px; min-height: 20px; color: #111827; }
    img.preview { display: block; margin-top: 16px; max-width: 100%; height: auto; border-radius: 8px; border: 1px solid #e5e7eb; }
  </style>
  <script>
    async function uploadImage() {
      const input = document.getElementById('file');
      const status = document.getElementById('status');
      const img = document.getElementById('preview');
      const btn = document.getElementById('btn');
      status.textContent = '';

      if (!input.files || !input.files[0]) {
        status.textContent = 'Please choose an image.';
        return;
      }

      const file = input.files[0];
      const form = new FormData();
      form.append('image', file);

      btn.disabled = true;
      status.textContent = 'Uploading...';

      try {
        const res = await fetch('http://localhost:8090/api/upload/image', {
          method: 'POST',
          body: form
        });
        if (!res.ok) {
          const text = await res.text();
          throw new Error(text || `Upload failed: ${res.status}`);
        }
        const data = await res.json();
        const url = `http://localhost:8090${data.url}`;
        img.src = url;
        img.alt = 'Uploaded image';
        img.style.display = 'block';
        status.textContent = 'Upload complete.';
      } catch (err) {
        status.textContent = 'Error: ' + err.message;
      } finally {
        btn.disabled = false;
      }
    }
  </script>
  </head>
  <body>
    <div class="card">
      <h1>Upload an image</h1>
      <input id="file" type="file" accept="image/*" />
      <div>
        <button id="btn" onclick="uploadImage()">Upload</button>
      </div>
      <div id="status" class="status"></div>
      <img id="preview" class="preview" style="display:none" />
    </div>
  </body>
</html>


